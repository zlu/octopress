<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ruby | @zlu]]></title>
  <link href="http://www.zlu.me/blog/categories/ruby/atom.xml" rel="self"/>
  <link href="http://www.zlu.me/"/>
  <updated>2012-08-30T22:04:23+07:00</updated>
  <id>http://www.zlu.me/</id>
  <author>
    <name><![CDATA[Zhao Lu]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Uninstall Multiple Versions of Multiple Ruby Gems]]></title>
    <link href="http://www.zlu.me/blog/2012/07/31/uninstall-multiple-versions-of-multiple-ruby-gem/"/>
    <updated>2012-07-31T10:13:00+07:00</updated>
    <id>http://www.zlu.me/blog/2012/07/31/uninstall-multiple-versions-of-multiple-ruby-gem</id>
    <content type="html"><![CDATA[<p>Let's say you have multiple versions of spree gems installed and want to get rid of the older versions.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>zlu@zlu-mba: gem list spree
</span><span class='line'>spree <span class="o">(</span>1.1.3, 1.0.0, 1.0.0.rc2<span class="o">)</span>
</span><span class='line'>spree_api <span class="o">(</span>1.1.3, 1.0.0, 1.0.0.rc2<span class="o">)</span>
</span><span class='line'>spree_auth <span class="o">(</span>1.1.3, 1.0.0, 1.0.0.rc2<span class="o">)</span>
</span><span class='line'>spree_cmd <span class="o">(</span>1.1.3, 1.0.0, 1.0.0.rc2<span class="o">)</span>
</span><span class='line'>spree_core <span class="o">(</span>1.1.3, 1.0.0, 1.0.0.rc2<span class="o">)</span>
</span><span class='line'>spree_dash <span class="o">(</span>1.1.3, 1.0.0, 1.0.0.rc2<span class="o">)</span>
</span><span class='line'>spree_promo <span class="o">(</span>1.1.3, 1.0.0, 1.0.0.rc2<span class="o">)</span>
</span><span class='line'>spree_sample <span class="o">(</span>1.1.3, 1.0.0, 1.0.0.rc2<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Instead of doing this a bunch of times (for different gems and versions):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gem uninstall spree -v 1.0.0
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Do this:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gem uninstall spree<span class="o">{</span>,&lt;em&gt;api,&lt;/em&gt;auth,&lt;em&gt;cmd,&lt;/em&gt;core,&lt;em&gt;dash,&lt;/em&gt;promo,_sample<span class="o">}</span> -v <span class="o">{</span>1.0.0, 1.0.0.rc2<span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>This is a feature of bash shell - <a href="http://www.gnu.org/software/bash/manual/html_node/Brace-Expansion.html#Brace-Expansion">brace expansion</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install Native Ruby Gem in Mountain Lion Preview]]></title>
    <link href="http://www.zlu.me/blog/2012/02/21/install-native-ruby-gem-in-mountain-lion-preview/"/>
    <updated>2012-02-21T13:59:00+07:00</updated>
    <id>http://www.zlu.me/blog/2012/02/21/install-native-ruby-gem-in-mountain-lion-preview</id>
    <content type="html"><![CDATA[<p>In Preview of OS X Mountain Lion, XCode has been distributed as a .app package verses the traditional installer.
Also the Commandline Tools are not installed by default.  Commandline Tools contains cc/gcc that you will need.</p>

<p>After download the preview of XCode 4.4, drop it to the Application directory.</p>

<p>Open XCode and cmd + , to open Preferences panel where you can install Commandline Tools:</p>

<p><img src="https://img.skitch.com/20120221-r2cidbjd92nh9tmswq19hj6rdc.jpg"></p>

<p>Now in shell you should be able to <code>locate cc</code> and <code>locate gcc</code></p>

<p>Now if you try to <code>gem install hpricot</code> or any gem that requires native extension (c), you may encounter problems
looks like this:</p>

<pre>

checking for main() in -lc... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/ruby/bin/ruby
        --with-hpricot_scan-dir
        --without-hpricot_scan-dir
        --with-hpricot_scan-include
        --without-hpricot_scan-include=${hpricot_scan-dir}/include
        --with-hpricot_scan-lib
        --without-hpricot_scan-lib=${hpricot_scan-dir}/lib
        --with-clib
        --without-clib

</pre>


<p>If you cat the mkmf.log, you may see something like this:</p>

<p>"gcc-4.2 -o conftest ...."</p>

<p>So the fix is not to add configuration options but to simply create sym link of gcc-4.2:
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>shell </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ln -s /usr/bin/gcc /usr/bin/gcc-4.2</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A Couple Things to Watch Out For Using PrivatePub]]></title>
    <link href="http://www.zlu.me/blog/2012/02/12/a-couple-things-to-watch-out-for-using-privatepub/"/>
    <updated>2012-02-12T20:38:00+07:00</updated>
    <id>http://www.zlu.me/blog/2012/02/12/a-couple-things-to-watch-out-for-using-privatepub</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/ryanb/private_pub">Private Pub</a> is a convinent gem wraps around <a href="http://faye.jcoglan.com/ruby.html">Faye</a>.</p>

<p>There are a few things to consider when using PrivatePub.</p>

<ol>
<li><p>It does <strong>not</strong> support ssl.
However, there is a <a href="https://github.com/ryanb/private_pub/pull/33">pull request</a> for it.</p></li>
<li><p>You almost always want to add some sort of filtering on the server or client side, or maybe both.
For example, if you don't want your chat message to be received by everyone logged in, you will need to
publish to a channel uniquely identified by each session of the chat.</p></li>
</ol>


<p><strong>UPDATE</strong> @rbates has merged this pull request.  I was able to verify ssl support indeed works!</p>
]]></content>
  </entry>
  
</feed>
